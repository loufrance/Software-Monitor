<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Software Dashboard</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #121212; color: #e0e0e0; margin: 0; padding: 20px; }
        .container { max-width: 1100px; margin: auto; background: #1e1e1e; padding: 30px; border-radius: 12px; box-shadow: 0 4px 30px rgba(0,0,0,0.5); }
        h1 { color: #ffffff; margin-top: 0; }
        .info-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; font-size: 0.9em; color: #aaa; }
        .status-badge { padding: 4px 10px; border-radius: 20px; font-size: 0.85em; font-weight: bold; text-transform: uppercase; display: inline-block; }
        .status-OK { background-color: #1b4332; color: #75f0a0; }
        .status-UPDATE { background-color: #641220; color: #ffb3c1; border: 1px solid #801b2d; animation: pulse 2s infinite; }
        .status-NEU { background-color: #5e503f; color: #ffd60a; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th { background-color: #2d2d2d; color: #ffffff; text-align: left; padding: 12px; border-bottom: 2px solid #444; }
        td { padding: 12px; border-bottom: 1px solid #333; }
        tr:hover { background-color: #2a2a2a; }
        .btn-accept { background-color: #2b5797; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.8em; margin-left: 10px; transition: background 0.3s; }
        .btn-accept:hover { background-color: #3e78cc; }
        .btn-accept:disabled { background-color: #444; cursor: not-allowed; opacity: 0.5; }
        .progress-container { background: #333; border-radius: 10px; height: 12px; margin: 15px 0; overflow: hidden; }
        .progress-bar { background: #4ade80; height: 100%; transition: width 1s; box-shadow: 0 0 10px rgba(74, 222, 128, 0.3); }
		.btn-add { background-color: #d4a017; /* Gold/Gelb */ color: black; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.8em; margin-left: 10px; font-weight: bold; transition: background 0.3s; }
		.btn-add:hover { background-color: #ffd60a; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Software Monitor (franz@vobs.at - Jan26)</h1>
        <div class="info-bar">
            <span>Stand: <strong>14.02.2026 17:50 Uhr</strong></span>
            <span>26 von 28 Programmen aktuell</span>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" style="width: 93%"></div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Programm</th>
                    <th>IST</th>
                    <th>AKTUELL</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>            <tr>
                <td>7-Zip</td>
                <td>25.01</td>
                <td>26.00</td>
                <td><span class='status-badge status-UPDATE'>UPDATE</span> <button class='btn-accept' onclick='acceptUpdate("7-Zip", "26.00")'>Übernehmen</button></td>
            </tr>            <tr>
                <td>Adobe Acrobat Reader</td>
                <td>2025.1.21111</td>
                <td>2025.1.21111</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Adobe AIR</td>
                <td>51.2.2.6</td>
                <td>51.2.2.6</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Affinity Suite</td>
                <td>3.0.3.4027</td>
                <td>3.0.3.4027</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Audacity</td>
                <td>3.7.7</td>
                <td>3.7.7</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>FFmpeg</td>
                <td>8.0.1</td>
                <td>8.0.1</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Foxit PDF Reader</td>
                <td>2025.3.0.35737</td>
                <td>2025.3.0.35737</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>GIMP</td>
                <td>3.0.8</td>
                <td>3.0.8</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Google Chrome Enterprise</td>
                <td>144.0.7559.133</td>
                <td>144.0.7559.177</td>
                <td><span class='status-badge status-UPDATE'>UPDATE</span> <button class='btn-accept' onclick='acceptUpdate("Google Chrome Enterprise", "144.0.7559.177")'>Übernehmen</button></td>
            </tr>            <tr>
                <td>Helbling Media App</td>
                <td>2.1.38</td>
                <td>2.1.38</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Inkscape</td>
                <td>1.4.3</td>
                <td>1.4.3</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>IrfanView</td>
                <td>4.73</td>
                <td>4.73</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Java 8</td>
                <td>8.481</td>
                <td>8.481</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Lego Mindstorms EV3 Classroom</td>
                <td>1.5.3</td>
                <td>1.5.3</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Lego SPIKE App</td>
                <td>3.6.0</td>
                <td>3.6.0</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>LYNX Whiteboard</td>
                <td>8.5.11.0</td>
                <td>8.5.11.0</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Minecraft Education</td>
                <td>1.21.9301.0</td>
                <td>1.21.9301.0</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Mozilla Firefox</td>
                <td>147.0.3</td>
                <td>147.0.3</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>MuseScore</td>
                <td>4.6.5</td>
                <td>4.6.5</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Notepad++</td>
                <td>8.9.1</td>
                <td>8.9.1</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>OpenBoard</td>
                <td>1.7.5</td>
                <td>1.7.5</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Paint.NET</td>
                <td>5.1.11</td>
                <td>5.1.11</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>PDF24 Creator</td>
                <td>11.29.1</td>
                <td>11.29.1</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Shotcut</td>
                <td>26.1.30</td>
                <td>26.1.30</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>SMART Notebook</td>
                <td>25.1.2254.1</td>
                <td>25.1.2254.1</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Sweet Home 3D</td>
                <td>7.5.0</td>
                <td>7.5.0</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>VLC Media Player</td>
                <td>3.0.23</td>
                <td>3.0.23</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            <tr>
                <td>Worksheet Crafter</td>
                <td>2025.2.10</td>
                <td>2025.2.10</td>
                <td><span class='status-badge status-OK'>OK</span></td>
            </tr>            </tbody>
        </table>
        <p style="margin-top: 30px; font-size: 0.8em; color: #adb5bd; text-align: center;">GitHub Actions Automatisierung</p>
    </div>

<script>
async function acceptUpdate(softwareName, newVersion) {
    const token = localStorage.getItem('github_token') || prompt("Bitte gib deinen GitHub Personal Access Token ein:");
    if (!token) return;
    localStorage.setItem('github_token', token);

    const button = event.target;
    button.disabled = true;
    button.innerText = "...";

    const url = 'https://api.github.com/repos/loufrance/Software-Monitor/dispatches';
    
    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: {
                'Authorization': 'Bearer ' + token, 
                'Accept': 'application/vnd.github.v3+json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                event_type: 'update_software_csv',
                client_payload: {
                    name: softwareName,
                    version: newVersion
                }
            })
        });

        if (response.ok) {
            button.parentElement.innerHTML = '<span class="status-badge status-OK" style="background-color: #2b5797;">Wird aktualisiert...</span>';
        } else {
            alert("Fehler: " + response.status);
            button.disabled = false;
            button.innerText = "Übernehmen";
        }
    } catch (e) {
        alert("Verbindungsfehler.");
        button.disabled = false;
    }
}
</script>
</body>
</html>
